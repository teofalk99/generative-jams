"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const vitest_1 = require("vitest");
const mockServer_1 = require("../mockServer");
const Runware_1 = require("../../Runware");
const utils_1 = require("../../Runware/utils");
const PORT = 8080;
(0, vitest_1.describe)("When using backend mockServer", async () => {
    const { mockServer } = await (0, mockServer_1.startMockBackendServer)();
    (0, vitest_1.beforeAll)(async () => { });
    (0, vitest_1.afterEach)(() => {
        vitest_1.vi.clearAllMocks();
    });
    (0, vitest_1.beforeAll)(async () => { });
    (0, vitest_1.test)("it should instantiate server correctly", async () => {
        vitest_1.vi.spyOn(Runware_1.RunwareServer.prototype, "addListener").mockImplementation(() => "afa");
        vitest_1.vi.spyOn(Runware_1.RunwareServer.prototype, "connect");
        const runwareServer = new Runware_1.RunwareServer({
            apiKey: "API_KEY",
            url: utils_1.BASE_RUNWARE_URLS.TEST,
        });
        (0, vitest_1.expect)(runwareServer._apiKey).toBe("API_KEY");
        (0, vitest_1.expect)(runwareServer.connect).toBeCalledTimes(1);
        (0, vitest_1.expect)(runwareServer._ws).toBeDefined();
    });
});
