"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.startMockBackendServer = exports.startMockServer = void 0;
const mock_socket_1 = require("mock-socket");
const Runware_1 = require("../Runware");
const utils_1 = require("../Runware/utils");
const ws_1 = require("ws");
const startMockServer = async () => {
    const mockServer = new mock_socket_1.Server("ws://localhost:8080");
    mockServer.on("connection", (socket) => {
        socket.on("message", (data) => {
            //   socket.send("test message from mock server");
        });
    });
    const runware = new Runware_1.Runware({
        apiKey: "API_KEY",
        url: utils_1.BASE_RUNWARE_URLS.TEST,
    });
    await (0, utils_1.delay)(1);
    return { runware, mockServer };
};
exports.startMockServer = startMockServer;
const startMockBackendServer = async () => {
    const mockServer = new ws_1.WebSocketServer({ port: 8080 });
    mockServer.on("connection", (socket) => {
        socket.on("message", (data, isBinary) => {
            const message = !isBinary ? data === null || data === void 0 ? void 0 : data.toString() : data;
            //   socket.send("test message from mock server");
        });
    });
    const runwareServer = new Runware_1.RunwareServer({
        apiKey: "API_KEY",
        url: utils_1.BASE_RUNWARE_URLS.TEST,
    });
    await (0, utils_1.delay)(1);
    return { runwareServer, mockServer };
};
exports.startMockBackendServer = startMockBackendServer;
